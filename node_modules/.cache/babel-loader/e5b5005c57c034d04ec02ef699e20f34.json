{"ast":null,"code":"import _classCallCheck from \"/Users/michaelye/code/spliffy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/michaelye/code/spliffy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/michaelye/code/spliffy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/michaelye/code/spliffy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/michaelye/code/spliffy/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/michaelye/code/spliffy/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport Gif from './Gif.js';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this));\n\n    _this.loadMoreGifs = function () {\n      var windowBottomY = window.pageYOffset + window.innerHeight,\n          appHeight = document.body.offsetHeight;\n\n      if (appHeight - windowBottomY < 150) {\n        if (_this.state.view === 'trending') {\n          _this.getTrendingGifs();\n        }\n\n        if (_this.state.view === 'search') {\n          _this.getSearchGifs();\n        }\n      }\n    };\n\n    _this.renderTrending = function () {\n      _this.setState({\n        view: 'trending',\n        gifs: [],\n        loading: true,\n        offset: 0\n      }, _this.getTrendingGifs);\n    };\n\n    _this.searchGifs = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        view: 'search',\n        gifs: [],\n        loading: true,\n        offset: 0,\n        query: _this.state.value\n      }, _this.getSearchGifs);\n    };\n\n    _this.addFavorite = function (gif) {\n      var newFavorites = Object.assign({}, _this.state.favorites);\n      newFavorites[gif.id] = gif;\n\n      _this.setState({\n        favorites: newFavorites\n      });\n    };\n\n    _this.removeFavorite = function (gif) {\n      var newFavorites = Object.assign({}, _this.state.favorites);\n      delete newFavorites[gif.id];\n\n      _this.setState({\n        favorites: newFavorites\n      }, function () {\n        return _this.state.view === 'favorite' ? _this.renderFavorites() : null;\n      });\n    };\n\n    _this.renderFavorites = function () {\n      _this.setState({\n        view: 'favorite',\n        gifs: Object.values(_this.state.favorites)\n      }, _this.renderGifs);\n    };\n\n    _this.handleChange = function (e) {\n      _this.setState({\n        value: e.target.value\n      });\n    };\n\n    _this.state = {\n      url: 'https://api.giphy.com/v1/gifs/',\n      gifs: [],\n      key: 'GoNup8Vhyxzuui7BE9WYUaBN&offset=',\n      view: 'trending',\n      offset: 0,\n      value: '',\n      // search bar input value\n      query: '',\n      // search query\n      favorites: {},\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getTrendingGifs();\n      window.onscroll = this.loadMoreGifs;\n    }\n    /* infinite scroll/load */\n\n  }, {\n    key: \"getTrendingGifs\",\n    value: function getTrendingGifs() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          url = _this$state.url,\n          gifs = _this$state.gifs,\n          key = _this$state.key,\n          offset = _this$state.offset,\n          newOffset = offset + 24;\n      axios.get(\"\".concat(url, \"trending?api_key=jZRfFuMp\").concat(key).concat(offset, \"&limit=24\")).then(function (response) {\n        var nextGifBatch = response.data.data;\n\n        _this2.setState({\n          gifs: gifs.concat(nextGifBatch),\n          offset: newOffset,\n          loading: false\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this2.setState({\n          gifs: [],\n          loading: false\n        });\n      });\n    }\n    /* Searching gifs */\n\n  }, {\n    key: \"getSearchGifs\",\n    value: function getSearchGifs() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          url = _this$state2.url,\n          gifs = _this$state2.gifs,\n          key = _this$state2.key,\n          offset = _this$state2.offset,\n          query = _this$state2.query,\n          newOffset = offset + 24;\n      axios.get(\"\".concat(url, \"search?api_key=jZRfFuMp\").concat(key).concat(offset, \"&limit=24&q=\").concat(query)).then(function (response) {\n        var nextGifBatch = response.data.data;\n\n        _this3.setState({\n          gifs: gifs.concat(nextGifBatch),\n          offset: newOffset,\n          loading: false\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this3.setState({\n          gifs: [],\n          loading: false\n        });\n      });\n    }\n    /*  Add, remove and render favorites */\n\n  }, {\n    key: \"renderGifs\",\n\n    /* Rendering gifs */\n    value: function renderGifs() {\n      var _this4 = this;\n\n      var _this$state3 = this.state,\n          gifs = _this$state3.gifs,\n          view = _this$state3.view,\n          favorites = _this$state3.favorites,\n          loading = _this$state3.loading;\n\n      if (gifs.length === 0 && !loading) {\n        return React.createElement(\"div\", {\n          id: \"error\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, \"NO GIFS...\");\n      }\n\n      return gifs.map(function (gif) {\n        var favorited = Boolean(favorites[gif.id]);\n        if (view === 'favorite') favorited = true;\n        return React.createElement(Gif, {\n          gif: gif,\n          key: gif.id,\n          favorite: favorited,\n          addFavorite: _this4.addFavorite,\n          removeFavorite: _this4.removeFavorite,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state4 = this.state,\n          value = _this$state4.value,\n          view = _this$state4.view;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"top-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"logo\",\n        onClick: this.renderTrending,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"spliffy.gif\",\n        alt: \"(_______)\",\n        id: \"spliffy-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        id: \"spliffy-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"SPLIFFY\")), React.createElement(\"div\", {\n        id: \"search-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        id: \"search-input\",\n        onSubmit: this.searchGifs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: value,\n        onChange: this.handleChange,\n        type: \"text\",\n        placeholder: \"Search all gifs\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      })))), React.createElement(\"img\", {\n        src: \"search.png\",\n        id: \"search-button\",\n        alt: \"search\",\n        onClick: this.searchGifs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        id: \"middle-bar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"view\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, view.toUpperCase(), \" GIFS\"), React.createElement(\"button\", {\n        type: \"button\",\n        id: \"favorites-button\",\n        onClick: this.renderFavorites,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"favorites-text\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"FAVORITES\"), React.createElement(\"span\", {\n        id: \"favorites-heart\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, \"\\u2665\"))), React.createElement(\"div\", {\n        id: \"gifs-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, this.renderGifs()));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/michaelye/code/spliffy/src/App.js"],"names":["React","Component","axios","Gif","App","loadMoreGifs","windowBottomY","window","pageYOffset","innerHeight","appHeight","document","body","offsetHeight","state","view","getTrendingGifs","getSearchGifs","renderTrending","setState","gifs","loading","offset","searchGifs","e","preventDefault","query","value","addFavorite","gif","newFavorites","Object","assign","favorites","id","removeFavorite","renderFavorites","values","renderGifs","handleChange","target","url","key","onscroll","newOffset","get","then","response","nextGifBatch","data","concat","catch","error","console","log","length","map","favorited","Boolean","toUpperCase"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport Gif from './Gif.js';\n\nexport default class App extends Component {\n  constructor() {\n    super()\n    this.state = {\n      url: 'https://api.giphy.com/v1/gifs/',\n      gifs: [],\n      key:  'GoNup8Vhyxzuui7BE9WYUaBN&offset=',\n      view: 'trending',\n      offset: 0,\n      value: '', // search bar input value\n      query: '', // search query\n      favorites: {},\n      loading: true\n    }\n  }\n\n  componentDidMount() {\n    this.getTrendingGifs();\n    window.onscroll = this.loadMoreGifs;\n  }\n\n\n  /* infinite scroll/load */\n\n  loadMoreGifs = () => {\n    const windowBottomY = window.pageYOffset + window.innerHeight,\n          appHeight = document.body.offsetHeight;\n\n    if (appHeight - windowBottomY < 150) {\n      if (this.state.view === 'trending') {\n        this.getTrendingGifs();\n      } \n      if (this.state.view === 'search') {\n        this.getSearchGifs();\n      }\n    }\n  }\n\n\n  /* Trending gifs */\n\n  renderTrending = () => {\n    this.setState({\n      view: 'trending',\n      gifs: [],\n      loading: true,\n      offset: 0\n    }, this.getTrendingGifs);\n  }\n\n  getTrendingGifs() {\n    const { url, gifs, key, offset } = this.state,\n          newOffset = offset + 24;\n\n    axios.get(`${url}trending?api_key=jZRfFuMp${key}${offset}&limit=24`)\n      .then((response) => {\n        const nextGifBatch = response.data.data;\n        this.setState({ gifs: gifs.concat(nextGifBatch), offset: newOffset, loading: false });\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ gifs: [], loading: false });\n      });\n  }\n\n\n  /* Searching gifs */\n\n  searchGifs = (e) => {\n    e.preventDefault();\n    this.setState({\n        view: 'search',\n        gifs: [],\n        loading: true,\n        offset: 0,\n        query: this.state.value\n    }, this.getSearchGifs);\n  }\n\n  getSearchGifs() {\n    const { url, gifs, key, offset, query } = this.state,\n          newOffset = offset + 24;\n\n    axios.get(`${url}search?api_key=jZRfFuMp${key}${offset}&limit=24&q=${query}`)\n      .then((response) => {\n        const nextGifBatch = response.data.data;\n        this.setState({ gifs: gifs.concat(nextGifBatch), offset: newOffset, loading: false });\n      })\n      .catch((error) => {\n        console.log(error);\n        this.setState({ gifs: [], loading: false });\n      });\n  }\n\n\n  /*  Add, remove and render favorites */\n  \n  addFavorite = (gif) => {\n    const newFavorites = Object.assign({}, this.state.favorites);\n    newFavorites[gif.id] = gif;\n    this.setState({ favorites: newFavorites });\n  }\n\n  removeFavorite = (gif) => {\n    const newFavorites = Object.assign({}, this.state.favorites);\n    delete newFavorites[gif.id];\n    this.setState({ favorites: newFavorites }, () => this.state.view === 'favorite' ? this.renderFavorites() : null);\n  }\n\n  renderFavorites = () => {\n    this.setState({ \n      view: 'favorite',\n      gifs: Object.values(this.state.favorites)\n    }, this.renderGifs);\n  }\n\n\n  /* Form input event handler */\n\n  handleChange = (e) => {\n    this.setState({ value: e.target.value });\n  }\n\n  \n  /* Rendering gifs */\n\n  renderGifs() {\n    const { gifs, view, favorites, loading } = this.state;\n\n    if (gifs.length === 0 && !loading) {\n      return <div id=\"error\">NO GIFS...</div>\n    }\n    \n    return gifs.map(gif => {\n      let favorited = Boolean(favorites[gif.id]);\n      if (view === 'favorite') favorited = true;\n      return (\n        <Gif gif={gif}\n          key={gif.id}\n          favorite={favorited}\n          addFavorite={this.addFavorite}\n          removeFavorite={this.removeFavorite}\n        />\n      );\n    });\n  }\n\n  render() {\n    const { value, view } = this.state;\n    return (\n      <div className=\"App\">\n        <div id=\"top-bar\">\n          <div id=\"logo\" onClick={this.renderTrending}>\n            <img src=\"spliffy.gif\" alt=\"(_______)\" id=\"spliffy-logo\"></img>\n            <span id=\"spliffy-text\">SPLIFFY</span>\n          </div>\n          <div id=\"search-bar\">\n            <form id=\"search-input\" onSubmit={this.searchGifs}>\n              <div>\n                <input value={value} onChange={this.handleChange} type=\"text\" placeholder=\"Search all gifs\"/>\n              </div>\n            </form>\n          </div>\n          <img src=\"search.png\" id=\"search-button\" alt=\"search\" onClick={this.searchGifs}/>\n        </div>\n        <div id=\"middle-bar\">\n          <div id=\"view\">{view.toUpperCase()} GIFS</div>\n          <button type=\"button\" id=\"favorites-button\" onClick={this.renderFavorites}>\n            <span id=\"favorites-text\">FAVORITES</span>\n            <span id=\"favorites-heart\">♥</span>\n          </button>\n        </div>\n        <div id=\"gifs-container\">\n          {this.renderGifs()}\n        </div>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}